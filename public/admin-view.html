<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment Game - Admin View</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .admin-header {
            background-color: #d81b60;
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .form-links {
            background-color: #f3f4f6;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .form-link {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .form-link input {
            flex-grow: 1;
        }
        
        .form-link button {
            margin-left: 10px;
        }
        
        .admin-notice {
            background-color: #ffebee;
            padding: 10px;
            border-radius: 4px;
            margin: 15px 0;
            color: #c62828;
            font-weight: bold;
        }

        /* Price change styles */
        .price-up {
            color: #4caf50;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .price-down {
            color: #f44336;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .fund-price {
            transition: color 0.3s ease;
        }

        /* Fund item styles */
        .fund-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .fund-item:last-child {
            border-bottom: none;
        }

        .fund-name {
            font-weight: bold;
        }

        /* Add these styles */
        .phase-display {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            margin: 0 10px;
        }
        
        .closed-phase {
            background-color: #f44336;
            color: white;
        }
        
        .trading-open-phase {
            background-color: #4caf50;
            color: white;
        }
        
        .phase-button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .phase-button:hover {
            background-color: #1976d2;
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <h1>Investment Game - ADMIN VIEW</h1>
        <div class="admin-notice">
            This is your admin view. Use the public-view.html page for display on the TV.
        </div>
    </div>
    
    <div class="form-links">
        <h2>Google Form URLs</h2>
        <p>Create two Google Forms: one for buying and one for selling. Paste the URLs below and click "Update QR Codes" to update them on the public view.</p>
        
        <div class="form-link">
            <label>Buy Orders Form URL:</label>
            <input type="text" id="buyFormUrl" placeholder="Paste your Google Form URL for buying">
        </div>
        
        <div class="form-link">
            <label>Sell Orders Form URL:</label>
            <input type="text" id="sellFormUrl" placeholder="Paste your Google Form URL for selling">
        </div>
        
        <button id="updateQrBtn" class="primary-btn">Update QR Codes on Public View</button>
    </div>
    
    <div class="panel">
        <h2>Game Controls</h2>
        <button id="startButton">Start Game</button>
        <span id="gameStatus">Status: Setup Mode</span>
        <span id="gameMode" class="game-mode setup-mode">SETUP MODE</span>
        <div id="setupNotice" class="notice">
            During setup, players can build initial portfolios without affecting prices. Fund prices will begin to fluctuate once the game starts.
        </div>
    </div>
    
    <div class="panel" id="phasePanel">
        <h2>Market Status</h2>
        <div class="phase-info">
            <div class="phase-label">Current Phase: <span id="phaseDisplay" class="phase-display closed-phase">Markets Closed</span></div>
            <button id="phaseButton" class="phase-button">Open Trading</button>
        </div>
    </div>
    
    <div class="panel">
        <h2>Add Player</h2>
        <input type="text" id="playerNameInput" placeholder="Player Name">
        <button id="addPlayerButton">Add Player</button>
    </div>
    
    <div class="panel">
        <h2>Buy Shares</h2>
        <select id="buyPlayerSelect"></select>
        <select id="buyFundSelect"></select>
        <input type="number" id="buySharesInput" value="1" min="1">
        <button id="buyButton">Buy</button>
        <div id="buyingNotice" class="phase-notice">Buy orders can only be placed during Buying Period</div>
    </div>
    
    <div class="panel">
        <h2>Sell Shares</h2>
        <select id="sellPlayerSelect"></select>
        <select id="sellFundSelect"></select>
        <input type="number" id="sellSharesInput" value="1" min="1">
        <button id="sellButton">Sell</button>
        <div id="sellingNotice" class="phase-notice">Sell orders can only be placed during Selling Period</div>
    </div>
    
    <div class="panel">
        <h2>Pending Transactions</h2>
        <div id="transactionButtons" class="transaction-controls" style="display: none;">
            <button id="processNextBtn" class="process-button">Process Next Order</button>
            <button id="processAllBtn" class="process-button-all">Process All Orders</button>
        </div>
        <div id="pendingTransactions" class="pending-container">
            <div class="no-pending">No pending transactions</div>
        </div>
    </div>
    
    <div class="panel">
        <h2>Funds <span id="marketStatus" class="market-status" style="display: none;">ACTIVE</span></h2>
        <div class="market-notice" id="marketNotice">
            Market prices are frozen during buying and selling periods, and only fluctuate during "Markets Closed" phase.
        </div>
        <div id="fundsList"></div>
    </div>
    
    <div class="panel">
        <h2>Players</h2>
        <div id="playersList"></div>
    </div>
    
    <div class="panel">
        <h2>Log</h2>
        <div id="log" class="log"></div>
        
    </div>

    <div class="panel">
        <h2>Market Events</h2>
        <div class="event-buttons">
            <h3>Trump Coin</h3>
            <button onclick="triggerMarketEvent('trump_executive_order')" class="event-button positive">Trump Executive Order (+40%)</button>
            <button onclick="triggerMarketEvent('trump_rug_pull')" class="event-button negative">Rug Pull (-90%)</button>
            
            <h3>Checkpoint Therapeutics</h3>
            <button onclick="triggerMarketEvent('checkpoint_fda_rejection')" class="event-button negative">FDA Rejection (-35%)</button>
            
            <h3>Boeing Co.</h3>
            <button onclick="triggerMarketEvent('boeing_no_chairs')" class="event-button positive">No Chairs (+30%)</button>
            <button onclick="triggerMarketEvent('boeing_doors_off')" class="event-button negative">Doors Fall Off (-20%)</button>
            
            <h3>Luigi Mangione Legal Fund</h3>
            <button onclick="triggerMarketEvent('luigi_green_sweater')" class="event-button positive">Green Sweater (+69%)</button>
            
            <h3>Taylor Swift's Eras Tour Treasury</h3>
            <button onclick="triggerMarketEvent('taylor_new_dates')" class="event-button positive">New Tour Dates (+40%)</button>
            <button onclick="triggerMarketEvent('taylor_engagement')" class="event-button negative">Engagement Rumors (-25%)</button>
        </div>
    </div>
    
    <!-- Load JavaScript files -->
    <script src="js/socket-client.js?v=4"></script>
    <script src="js/game.js?v=4"></script>
    <script src="js/funds.js?v=4"></script>
    <script src="js/players.js?v=4"></script>
    <script src="js/transactions.js?v=4"></script>
    <script src="js/phases.js?v=4"></script>
    <script src="js/ui.js?v=4"></script>
    <script src="js/data-sharing.js?v=4"></script>
    <script src="js/admin.js?v=4"></script>
    <script src="js/events.js"></script>
</body>
</html>